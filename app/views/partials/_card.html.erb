<div class="card">
    <div class="card-content">
        <!-- Card header -->
        <div class="card-header bg-blue">
            <div class="status-circle <%= color %>">
                <i class="fa <%= icon %> fa-white"></i>
            </div>
            <i class="fa fa-server testline-icon text-white"></i>
            <div class="card-header-overlay">
                <h3 class="card-title"><%= testline.name %></h3>
                <a href="#" class="card-header-link" data-diagram="<%= testline.diagram %>"
                    data-toggle="modal" data-target="#img-modal">Show Diagram</a><br>
                <a href="#" class="card-header-link" data-description="<%= testline.description %>"
                    data-toggle="modal" data-target="#desc-modal">Show Description</a>
            </div>
            <div class="timer">
                <i class="fa fa-clock-o"></i> <span id="tm-<%= testline.id %>"></span>
            </div>
        </div>
        <!-- Card body -->
        <div class="card-body">
            <% if !testline.reservations.empty? %>
                <ul>
                    <% testline.reservations.each_with_index do |reservation, index| %>
                    <li>
                        <% orderProps = reserveOrder(index) %>
                        <p class="card-text"><%= reservation.name %></p>
                        <small class="badge badge-<%= orderProps['class'] %>"><%= orderProps['text'] %></small>
                        <span class="delete-overlay">
                            <i class="fa fa-calendar-check-o"></i> 
                            <%= reservation.user.email %>
                        </span>
                    </li>
                    <% end %>
                </ul>
            <% else %>
                <p style="text-align: center;">There are currently no reservations for this testline.</p>
            <% end %>
        </div>
        <!-- Card footer -->
        <div class="card-footer">
            <% if testline.isMaintenance %>
                <p class="card-text">This testline is under maintenance.</p>
            <% elsif !(userReservation = didReserveTestline(testline)).nil? %>
                <%= link_to("Release", "#", method: :delete, class: "card-link text-red", 
                    data: {href: reservations_path(userReservation), toggle: "modal", target: "#delete-modal"}) %>
                <a href="#" class="card-link text-red" data-href="<%= testline.description %>"
                    data-toggle="modal" data-target="#delete-modal">Release</a>
            <% elsif testline.reservations.empty? %>
                <a href="#" class="card-link" data-testline="<%= testline.id %>" data-team="<%= @team.id %>"
                    data-toggle="modal" data-target="#reserve-modal">Use Now!</a>
            <% elsif !testline.reservations.empty? %>
                <a href="#" class="card-link" data-testline="<%= testline.id %>" data-team="<%= @team.id %>"
                    data-toggle="modal" data-target="#reserve-modal">Reserve Now!</a>
            <% else %>
            <% end %>
        </div>
    </div>
</div>