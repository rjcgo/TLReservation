<header class="wrapper">
    <h1><%= @team.name %></h1>
    <div class="dropdown team-dropdown">
		<input type="checkbox" id="dropbtn">
		<label for="dropbtn" class="dropbtn team-dropbtn">
			<i class="fa fa-th fa-midnightblue"></i>
			Teams
		</label>
        <div class="dropdown-triangle team-dropdown-triangle"></div>
        <div class="dropdown-content team-dropdown-content">
            <div class="outer-border-hidden">
                <ul class="pokeballs-grid pokeballs-grid-lg">
                	<% ball = pokelist %>
					<% @teams.each do |team| %>
	                    <li>
                        <a href="/teams/<%= team.id %>"><%= content_tag :span, '', :class => ball[team.id % 20] %> <%= team.name %></a>
	                    </li>
	                <% end %>
                </ul>
            </div>
        </div>

    </div>
</header>

<main class="wrapper">
	 <% if @mytestlines.count == 0 %>
			<div class="notice-wrapper">
				<h2>No Testlines Available</h2>
			</div>
		<% end %>
	<% if available %>
	    <section id="available">
	        <h2>Available</h2>
	        <div class="card-deck">
	        	<% @mytestlines.each do |testline| %>
	        		<% if user_signed_in? %>
		        		<%= content_tag :div, :class => "modal", :id => testline.id do -%>
						    <div class="modal-content">
						        <%= form_for([testline,testline.reservations.build]) do |f| %>
						            <div class="modal-header">
						            	<%= content_tag :button, 'x',  :class => "modal-close", :onclick => "deactivate_modal(#{testline.id})" %>
						                <h3 class="modal-title"><%= testline.name %></h3>
						            </div>
						            <div class="modal-body">
						                <label for="title">Title:</label>
						                <%= f.text_field :name, :placeholder => "Title", :tabindex => "1", :required => "required" , :class => "form-control"%>
						                <label for="team-name">Team Name:</label>
						                <%= f.text_field :team_name, :value => @team.name, :tabindex => "2", :readonly => true , :class => "form-control"%>
						                <label for="email">Email:</label>
						                <%= f.email_field :email, :value => current_user.email, :tabindex => "3", :readonly => true , :class => "form-control"%>
						                <label for="description">Description:</label>
						                <%= f.text_area :description, :placeholder => "Description", :tabindex => "4", :required => "required", :class => "form-control" %>
						            </div>
						            <div class="modal-footer">
						                <button name="submit" class="modal-btn" type="submit" id="contact-submit" data-submit="...Sending">Reserve now!</button>
						            </div>
						        <% end %>
						    </div>
						<% end %>
					<% end %> 

					<% if ( testline.reservations.count ==0) && !testline.isMaintenance? %>
			            <div class="card">
			                <div class="card-content">
			                    <div class="card-header bg-blue">
			                        <div class="status-circle bg-green">
			                            <i class="fa fa-check fa-white"></i>
			                        </div>
			                        <i class="fa fa-server testline-icon text-white"></i>
			                        <div class="card-header-overlay">
			                            <h3><%= testline.name %></h3>
			                            <a href="" class="show-diagram show-img-modal">Show Diagram</a><br>
			                            <a href="" class="show-description show-description-modal">Show Description</a>
			                        </div>
			                    </div>
			                  	<div class="card-body">
	    	                    </div>
			                    <div class="card-footer">
						             <% if user_signed_in? %>
										<%= submit_tag "Reserve now!", :type => "button", :id => testline.id, :class => "card-btn", :onclick => "activate_modal(#{testline.id})" %>
									<% end %>
			                    </div>
			                </div>
			            </div>
			        <% end %>
		        <% end %> 
	        </div>
	    </section>
	<% end %>
	<% if inUse %>
	    <section id="in-use">
	        <h2>In Use</h2>
	        <div class="card-deck">
	        	<% @mytestlines.each do |testline| %>
	        		<% if user_signed_in? %>
		        		<%= content_tag :div, :class => "modal", :id => testline.id do -%>

						    <div class="modal-content">
						        <%= form_for([testline,testline.reservations.build]) do |f| %>
						            <div class="modal-header">
						            	<%= content_tag :button, 'x',  :class => "modal-close", :onclick => "deactivate_modal(#{testline.id})" %>
						                <h3 class="modal-title"><%= testline.name %></h3>
						            </div>
						            <div class="modal-body">
						                <label for="title">Title:</label>
						                <%= f.text_field :name, :placeholder => "Title", :tabindex => "1", :required => "required" , :class => "form-control"%>
						                <label for="team-name">Team Name:</label>
						                <%= f.text_field :team_name, :value => @team.name, :tabindex => "3", :readonly => true , :class => "form-control"%>
						                <label for="email">Email:</label>
						                <%= f.email_field :email, :value => current_user.email, :tabindex => "2", :readonly => true , :class => "form-control"%>
						                <label for="description">Description:</label>
						                <%= f.text_area :description, :placeholder => "Description", :tabindex => "4", :required => "required", :class => "form-control" %>
						            </div>
						            <div class="modal-footer">
							             <% if user_signed_in? %>
											<button name="submit" class="modal-btn" type="submit" id="contact-submit" data-submit="...Sending">Reserve now!</button>
										<% end %>
			                 	   </div>
						        <% end %>
						    </div>

						<% end %>
					<% end %> 

					<% if ( testline.reservations.count !=0) && !testline.isMaintenance? %>
			            <div class="card">
			                <div class="card-content">
			                    <div class="card-header bg-blue">
			                        <div class="status-circle bg-red">
			                            <i class="fa fa-times fa-white"></i>
			                        </div>
			                        <i class="fa fa-server testline-icon text-white"></i>
			                        <div class="card-header-overlay">
			                            <h3><%= testline.name %></h3>
			                            <a href="" class="show-diagram show-img-modal">Show Diagram</a><br>
			                            <a href="" class="show-description show-description-modal">Show Description</a>
			                        </div>
			                    </div>
			                    <div class="card-body">
			                    	<%= card_body testline %>
			                    </div>
			                   	<div class="card-footer">
						             <% if user_signed_in? %>
										<%= submit_tag "Reserve now!", :type => "button", :id => testline.id, :class => "card-btn", :onclick => "activate_modal(#{testline.id})" %>
									<% end %>
			                    </div>
			                </div>
			                <!-- <div class="card-overlay">
			                                <p class="card-overlay-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In vel ligula tortor. Suspendisse eu
			                                    odio nunc. Praesent sagittis feugiat neque id ultricies. </p>
			                                <a href="" class="card-overlay-hide">Hide Description</a>
			                            </div> -->
			            </div>
			        <% end %>
			    <% end %>
	        </div>
	    </section>
	<% end %>
	<% if maintenance %>
	    <section id="maintenance">
	        <h2>Under Maintenance</h2>
	        <div class="card-deck">
	        	<% @mytestlines.each do |testline| %>
					<% if testline.isMaintenance? %>
			            <div class="card">
			                <div class="card-content">
			                    <div class="card-header bg-blue">
			                        <div class="status-circle bg-yellow">
			                            <i class="fa fa-exclamation-triangle fa-white"></i>
			                        </div>
			                        <i class="fa fa-server testline-icon text-white"></i>
			                        <div class="card-header-overlay">
			                            <h3><%= testline.name %></h3>
			                            <a href="" class="show-diagram show-img-modal">Show Diagram</a><br>
			                            <a href="" class="show-description show-description-modal">Show Description</a>
			                        </div>
			                    </div>
			                    <div class="card-body">
			                        <ul>
			                            <li>
			                                <p class="card-text">This testline is under maintenance.</p>
			                            </li>
			                        </ul>
			                    </div>
			                    <div class="card-footer">
			                    </div>
			                </div>
			                <!-- <div class="card-overlay">
			                                <p class="card-overlay-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In vel ligula tortor. Suspendisse eu
			                                    odio nunc. Praesent sagittis feugiat neque id ultricies. </p>
			                                <a href="" class="card-overlay-hide">Hide Description</a>
			                            </div> -->
			            </div>
			        <% end %>
			    <% end %>
	        </div>
	    </section>
	<% end %>
</main>

<div class="modal" id="img-modal">
    <button type="button" class="modal-close">&times;</button>
    <%= image_tag "long-html-img.jpg", :class => "modal-img", :alt => "long img" %>
</div>

<div class="modal" id="description-modal">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="modal-close">&times;</button>
            <h3 class="modal-title">Description</h3>
        </div>
        <div class="modal-body">
            <p class="modal-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In vel ligula tortor. Suspendisse eu odio nunc. Praesent
                sagittis feugiat neque id ultricies. Aliquam lectus ex, luctus eu volutpat a, consequat sit amet sapien.
                Nunc eget tincidunt elit. Duis et odio feugiat, finibus arcu ut, porta enim. Praesent mattis lorem ut erat
                sagittis ullamcorper. Pellentesque auctor pulvinar eros, at venenatis ante scelerisque a. Sed at iaculis
                risus, vitae auctor velit. Proin tempor augue ut nisi pellentesque pretium. Morbi in condimentum arcu, at
                tempus arcu. Etiam ac urna egestas, fermentum quam vitae, consequat nunc. In sed velit tellus. Sed turpis
                libero, dapibus quis sem eget, aliquam eleifend nisi. Aliquam porta a justo sit amet ornare.</p>
            <p class="modal-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In vel ligula tortor. Suspendisse eu odio nunc. Praesent
                sagittis feugiat neque id ultricies. Aliquam lectus ex, luctus eu volutpat a, consequat sit amet sapien.
                Nunc eget tincidunt elit. Duis et odio feugiat, finibus arcu ut, porta enim. Praesent mattis lorem ut erat
                sagittis ullamcorper. Pellentesque auctor pulvinar eros, at venenatis ante scelerisque a. Sed at iaculis
                risus, vitae auctor velit. Proin tempor augue ut nisi pellentesque pretium. Morbi in condimentum arcu, at
                tempus arcu. Etiam ac urna egestas, fermentum quam vitae, consequat nunc. In sed velit tellus. Sed turpis
                libero, dapibus quis sem eget, aliquam eleifend nisi. Aliquam porta a justo sit amet ornare.</p>
            <p class="modal-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In vel ligula tortor. Suspendisse eu odio nunc. Praesent
                sagittis feugiat neque id ultricies. Aliquam lectus ex, luctus eu volutpat a, consequat sit amet sapien.
                Nunc eget tincidunt elit. Duis et odio feugiat, finibus arcu ut, porta enim. Praesent mattis lorem ut erat
                sagittis ullamcorper. Pellentesque auctor pulvinar eros, at venenatis ante scelerisque a. Sed at iaculis
                risus, vitae auctor velit. Proin tempor augue ut nisi pellentesque pretium. Morbi in condimentum arcu, at
                tempus arcu. Etiam ac urna egestas, fermentum quam vitae, consequat nunc. In sed velit tellus. Sed turpis
                libero, dapibus quis sem eget, aliquam eleifend nisi. Aliquam porta a justo sit amet ornare.</p>
            <p class="modal-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In vel ligula tortor. Suspendisse eu odio nunc. Praesent
                sagittis feugiat neque id ultricies. Aliquam lectus ex, luctus eu volutpat a, consequat sit amet sapien.
                Nunc eget tincidunt elit. Duis et odio feugiat, finibus arcu ut, porta enim. Praesent mattis lorem ut erat
                sagittis ullamcorper. Pellentesque auctor pulvinar eros, at venenatis ante scelerisque a. Sed at iaculis
                risus, vitae auctor velit. Proin tempor augue ut nisi pellentesque pretium. Morbi in condimentum arcu, at
                tempus arcu. Etiam ac urna egestas, fermentum quam vitae, consequat nunc. In sed velit tellus. Sed turpis
                libero, dapibus quis sem eget, aliquam eleifend nisi. Aliquam porta a justo sit amet ornare.</p>
        </div>
        <div class="modal-footer">
            <button name="submit" type="submit" class="modal-btn" id="contact-submit" data-submit="...Sending">Close</button>
        </div>
    </div>
</div>

<div class="modal" id="remove_access">
    <div class="modal-confirm">
      <div class="modal-header">
          <button type="button" class="modal-close" onclick="cancel_modal()">&times;</button>
          <h3 class="modal-title"><i class="fa fa-trash"></i> Delete</h3>
      </div>
      <div class="modal-body">
        <p class="modal-text">Are you sure y
        ou want to remove this team's access from this testline?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="modal-btn bg-red" onclick="confirm_modal()">Delete</button>
        <button type="button" class="modal-btn" onclick="cancel_modal()">Cancel</button>
      </div>
  </div>
</div>

<script>
	function activate_modal(id) {
		var s = document.getElementById(id);
	    s.style.display = "block";
	}

	function deactivate_modal(id) {
		var s = document.getElementById(id);
	    s.style.display = "none";
	}

	// window.onclick = function(event) {
	//     if (event.target == modal) {
	//         modal.style.display = "none";
	//     }
	// }
</script>